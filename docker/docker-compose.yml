version: '2'
services:

    wordle1:
      build:
        context: ../
        dockerfile: docker/Dockerfile
      image: teleco_prod:v0.1
      expose:
          - 3000
      container_name: wordle_teleco
      environment:
        - VIRTUAL_HOST=wordle.arraiz.me
        - LETSENCRYPT_HOST=arraiz.me
        - HTTPS_METHOD=redirect


    nginx-proxy:
      image: jwilder/nginx-proxy
      ports:
        - 80:80
        - 443:443
      container_name: nginx-proxy
      networks:
        service_network:
      volumes:
        - /var/run/docker.sock:/tmp/docker.sock:ro
        - nginx-certs:/etc/nginx/certs
        - nginx-vhost:/etc/nginx/vhost.d
        - nginx-html:/usr/share/nginx/html


    nginx-proxy-letsencrypt:
      image: jrcs/letsencrypt-nginx-proxy-companion
      environment:
        NGINX_PROXY_CONTAINER: "nginx-proxy"
      networks:
        service_network:
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock:ro
        - nginx-certs:/etc/nginx/certs
        - nginx-vhost:/etc/nginx/vhost.d
        - nginx-html:/usr/share/nginx/html





volumes:
  nginx-certs:
  nginx-vhost:
  nginx-html: